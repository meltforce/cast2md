{% extends "base.html" %}

{% block title %}Settings - Transcriber Node{% endblock %}

{% block content %}
<hgroup>
    <h1>Settings</h1>
    <p>{{ config.name if config else 'Unknown Node' }}</p>
</hgroup>

{% if not config %}
<article>
    <header>
        <h3>Not Configured</h3>
    </header>
    <p>This node is not registered with a server.</p>
    <p>Run <code>cast2md node register --server &lt;server_url&gt; --name "Node Name"</code> to register.</p>
</article>
{% else %}

<article>
    <header>
        <h3>System Information</h3>
    </header>
    <table>
        <tbody>
            <tr>
                <td><strong>Platform</strong></td>
                <td>{{ system_info.platform }} ({{ system_info.machine }})</td>
            </tr>
            <tr>
                <td><strong>Processor</strong></td>
                <td>{{ system_info.processor }}</td>
            </tr>
            <tr>
                <td><strong>CPU Cores</strong></td>
                <td>{{ system_info.cpu_count }}</td>
            </tr>
            {% if system_info.memory_gb %}
            <tr>
                <td><strong>Memory</strong></td>
                <td>{{ system_info.memory_gb }} GB</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</article>

<article>
    <header>
        <h3>Whisper Configuration</h3>
    </header>
    <table>
        <tbody>
            <tr>
                <td><strong>Model</strong></td>
                <td><code>{{ settings.whisper_model }}</code></td>
            </tr>
            <tr>
                <td><strong>Backend</strong></td>
                <td><code>{{ settings.whisper_backend }}</code></td>
            </tr>
            <tr>
                <td><strong>Device</strong></td>
                <td><code>{{ settings.whisper_device }}</code></td>
            </tr>
            <tr>
                <td><strong>Compute Type</strong></td>
                <td><code>{{ settings.whisper_compute_type }}</code></td>
            </tr>
        </tbody>
    </table>
</article>

<article>
    <header>
        <h3>Node Configuration</h3>
    </header>
    <table>
        <tbody>
            <tr>
                <td><strong>Node ID</strong></td>
                <td><code style="font-size: 0.85em;">{{ config.node_id }}</code></td>
            </tr>
            <tr>
                <td><strong>Name</strong></td>
                <td>{{ config.name }}</td>
            </tr>
            <tr>
                <td><strong>Server URL</strong></td>
                <td><a href="{{ config.server_url }}">{{ config.server_url }}</a></td>
            </tr>
        </tbody>
    </table>
</article>

{% endif %}
{% endblock %}
